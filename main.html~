{% extends "base.html" %}

{# The entry point for the ReadTheDocs Theme.
 
   Any theme customisations should override this file to redefine blocks defined in
   the various templates. The custom theme should only need to define a main.html
   which `{% extends "base.html" %}` and defines various blocks which will replace
   the blocks defined in base.html and its included child templates.
#}

{# begin of customizations #}
{# 
   This file started from a copy of: 
   https://github.com/mkdocs/mkdocs/blob/master/mkdocs/themes/readthedocs/main.html
#}

  {# Define an alias for the nsl section in mkdocs.yml

     See: 

     - MkDocs Configuration
       https://www.mkdocs.org/user-guide/configuration/
   #}

  {# setting 'extra' and 'nsl':
     'extra' should exist by default - but it does not.
     See: MkDocs extra, https://www.mkdocs.org/user-guide/configuration/#extra
   #}
  {% set extra = config['extra'] %}
  {% set nsl   = extra.nsl %}

  {% block content %}

    {# DEBUG #}
    {% if nsl.debug %}
      <div class="nsl-debug">
        <h5>DEBUG</h5>
        <p>
	  <ul>    
	    <li><b>extra:</b> {{ extra }}</li>
	    <li><b>nsl:</b>   {{ nsl }}</li>
            <li><b>page.file.src_path:</b> {{ page.file.src_path|string|tojson|safe }}</li>
            <li><b>config['extra_css']:</b> {{ config['extra_css'] }}</li>
          </ul>
        </p>
      </div>
    {% endif %}

    {% if page.file.src_path == "vita.md" %}
      {# Use my newskylabs vita #}
      {% include 'newskylabs-vita.html' %}
    {% else %}
      {# Use the page generated by mkdocs #}
      {# {{ TODO page.file.src_path[:-5] }} #}
      <div class="page-{{ page.file.src_path[:-3] }}">
        {{ page.content }}
      </div>
    {% endif %}

  {% endblock %}

{# end of customizations #}

